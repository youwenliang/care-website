{"ast":null,"code":"var _jsxFileName = \"/Users/mliang/Websites/care-website/src/components/Map.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport '../App.css';\nimport Taiwan from \"@svg-maps/taiwan.main\";\nimport { SVGMap, CheckboxSVGMap, RadioSVGMap } from \"react-svg-map\";\nimport \"react-svg-map/lib/index.css\"; // Data\n\nimport data from '../data/data.js';\nconst cData = data.content;\nconst mData = data.map;\nvar dis = [],\n    list = [],\n    allList = [];\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sliderheight = () => {\n      var divHeight = $('#detailInfo').height();\n      $('#mobileBox').css({\n        'height': divHeight,\n        'min-height': \"200px\"\n      });\n    };\n\n    this.checkMobile = () => {\n      this.setState({\n        width: window.innerWidth\n      });\n      this.setState({\n        height: window.innerHeight\n      });\n    };\n\n    this.openMap = () => {\n      $('#detailInfo').removeClass(\"o-0\");\n      $('#mapInfo').removeClass(\"w-100\");\n      $('#mapInfo').addClass(\"w-50\");\n      this.clinincList();\n    };\n\n    this.resetMap = () => {\n      $('#detailInfo').addClass(\"o-0\");\n      $('#mapInfo').addClass(\"w-100\");\n      $('#mapInfo').removeClass(\"w-50\");\n      var $t = this;\n      var $p = $('path[aria-checked=\"true\"]');\n      $p.attr('aria-checked', \"false\");\n      $p.attr('aria-before', $t.state.currentMap);\n      $p.attr('tabindex', \"-1\");\n      $t.setState({\n        currentMap: null,\n        same: true,\n        value: \"\"\n      });\n    };\n\n    this.clinincList = () => {\n      dis = [];\n      list = [];\n      let filteredClinics = mData.filter(s => {\n        var check = s.city + \" \" + s.name + \" \" + s.address;\n        return check.indexOf(this.state.search) !== -1;\n      });\n      filteredClinics.map((s, i) => {\n        var count = s.address.indexOf('區') - 2;\n        var temp = s.address.substring(count, count + 3);\n\n        if (!dis.includes(temp)) {\n          dis.push(temp);\n          list.push({\n            \"dis\": temp,\n            \"address\": [s.address]\n          });\n        } else {\n          for (var i = 0; i < list.length; i++) {\n            if (list[i][\"dis\"] == temp) {\n              list[i][\"address\"].push(s.address);\n            }\n          }\n        }\n      });\n      allList = [];\n\n      for (var j = 0; j < list.length; j++) {\n        var temp = /*#__PURE__*/React.createElement(\"div\", {\n          key: j,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 11\n          }\n        }, list[j][\"dis\"]), /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 11\n          }\n        }, list[j][\"address\"]));\n        allList.push(temp);\n      }\n\n      this.setState({\n        allList: allList\n      });\n    };\n\n    this.state = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      value: \"\",\n      search: null,\n      currentMap: null,\n      same: false,\n      allList: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    var $t = this; // Map\n\n    $('.svg-map__location').each(function () {\n      if ($(this).attr('id').indexOf(\"city\") >= 0) {\n        $(this).attr('aria-city', 'true');\n      }\n    });\n    window.addEventListener('resize', this.checkMobile);\n    window.addEventListener('resize', this.sliderheight);\n    this.checkMobile();\n    this.sliderheight(); // Maps\n\n    $('path').click(function () {\n      $t.setState({\n        value: \"\"\n      });\n\n      if ($(this).attr('aria-checked') === \"true\") {\n        $(this).attr('aria-checked', \"false\");\n        $(this).attr('aria-before', $t.state.currentMap);\n        $(this).attr('tabindex', \"-1\");\n        setTimeout(function () {\n          $t.setState({\n            currentMap: null\n          });\n        }, 300);\n        $('#detailInfo').addClass(\"o-0\");\n        $('#mapInfo').addClass(\"w-100\");\n        $('#mapInfo').removeClass(\"w-50\");\n        $t.setState({\n          same: true\n        });\n      } else {\n        if ($(this).attr('aria-before')) {\n          $t.setState({\n            currentMap: $(this).attr('aria-before'),\n            search: $(this).attr('aria-before')\n          });\n          var thisID = $(this).attr('id');\n          $('path').each(function () {\n            if ($(this).attr('id') !== thisID) $(this).attr('aria-before', '');\n          });\n        } else {\n          $t.setState({\n            same: false\n          });\n          $('path').each(function () {\n            if ($(this).attr('id') !== thisID) $(this).attr('aria-before', '');\n          });\n        }\n\n        if ($t.state.same) {\n          $(this).attr('aria-checked', \"true\");\n          $(this).attr('tabindex', \"0\");\n          $t.openMap();\n        }\n      }\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    this.setState({\n      search: this.state.value\n    }, () => {\n      this.resetMap();\n      this.openMap();\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      width,\n      height\n    } = this.state;\n    const isMobile = width <= 959;\n    var $t = this;\n    var form = {\n      position: isMobile ? \"relative\" : \"absolute\",\n      bottom: \"0\"\n    };\n    return /*#__PURE__*/React.createElement(\"section\", {\n      id: \"map\",\n      className: \"pv0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container bg-blue-3 pa4 brBox mh3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"title bg-blue-1 pre-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, cData.map[\"title\"]), isMobile ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mobileBox\",\n      className: \"relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg-white mh2 brBox pa4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"center\",\n      style: form,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"search\",\n      name: \"clinic\",\n      placeholder: \"\\u8F38\\u5165\\u8A3A\\u6240\\u540D\\u7A31\\u67E5\\u8A62\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"\\u67E5\\u8A62\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"detailInfo\",\n      className: \"fl brBox bg-blue-3 o-0 position absolute pa4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 23\n      }\n    }, this.state.currentMap), this.state.allList, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 23\n      }\n    }, \"close\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mapContainer bg-white mh5 brBox cf pa4 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mapInfo\",\n      className: \"fl w-100 relative h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(RadioSVGMap, {\n      map: Taiwan,\n      onChange: function (n) {\n        $t.setState({\n          currentMap: n.id,\n          search: n.id\n        }, () => {\n          $t.openMap();\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"center\",\n      style: form,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"search\",\n      name: \"clinic\",\n      placeholder: \"\\u8F38\\u5165\\u8A3A\\u6240\\u540D\\u7A31\\u67E5\\u8A62\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"detailInfo\",\n      className: \"fl brBox bg-blue-3 o-0 position absolute pa4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 23\n      }\n    }, this.state.currentMap), this.state.allList, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 23\n      }\n    }, \"close\")))));\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["/Users/mliang/Websites/care-website/src/components/Map.js"],"names":["React","Component","$","Taiwan","SVGMap","CheckboxSVGMap","RadioSVGMap","data","cData","content","mData","map","dis","list","allList","Map","constructor","props","sliderheight","divHeight","height","css","checkMobile","setState","width","window","innerWidth","innerHeight","openMap","removeClass","addClass","clinincList","resetMap","$t","$p","attr","state","currentMap","same","value","filteredClinics","filter","s","check","city","name","address","indexOf","search","i","count","temp","substring","includes","push","length","j","handleChange","bind","handleSubmit","componentDidMount","each","addEventListener","click","setTimeout","thisID","event","target","preventDefault","render","isMobile","form","position","bottom","n","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport '../App.css';\n\nimport Taiwan from \"@svg-maps/taiwan.main\";\nimport { SVGMap, CheckboxSVGMap, RadioSVGMap} from \"react-svg-map\";\nimport \"react-svg-map/lib/index.css\";\n\n// Data\nimport data from '../data/data.js'\nconst cData = data.content;\nconst mData = data.map;\nvar dis = [], list = [], allList = [];\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      value: \"\",\n      search: null,\n      currentMap: null,\n      same: false,\n      allList: []\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount(){\n    var $t = this\n    // Map\n    $('.svg-map__location').each(function(){\n      if($(this).attr('id').indexOf(\"city\") >=0) {\n        $(this).attr('aria-city', 'true');\n      }\n    })\n    window.addEventListener('resize', this.checkMobile);\n    window.addEventListener('resize', this.sliderheight);\n    this.checkMobile();\n    this.sliderheight();\n\n    // Maps\n    $('path').click(function(){\n      $t.setState({value: \"\"})\n      if($(this).attr('aria-checked') === \"true\") {\n        $(this).attr('aria-checked', \"false\");\n        $(this).attr('aria-before', $t.state.currentMap);\n        $(this).attr('tabindex', \"-1\");\n        setTimeout(function(){\n          $t.setState({currentMap:null})\n        },300)\n        $('#detailInfo').addClass(\"o-0\");\n        $('#mapInfo').addClass(\"w-100\");\n        $('#mapInfo').removeClass(\"w-50\");\n        $t.setState({same: true});\n      } else {\n        if($(this).attr('aria-before')) {\n          $t.setState({currentMap:$(this).attr('aria-before'), search:$(this).attr('aria-before')});\n          var thisID = $(this).attr('id');\n          $('path').each(function(){\n            if($(this).attr('id')!==thisID) $(this).attr('aria-before','');     \n          })\n        } else {\n          $t.setState({same: false});\n          $('path').each(function(){\n            if($(this).attr('id')!==thisID) $(this).attr('aria-before','');     \n          })\n        }\n        if($t.state.same) {\n          $(this).attr('aria-checked', \"true\");\n          $(this).attr('tabindex', \"0\");\n          $t.openMap(); \n        }\n      }\n    })\n  }\n\n  sliderheight = () => {\n      var divHeight = $('#detailInfo').height();\n      $('#mobileBox').css({'height' : divHeight, 'min-height': \"200px\"});\n  }\n\n  checkMobile = () => {\n    this.setState({ width: window.innerWidth });\n    this.setState({ height: window.innerHeight });\n  }\n  openMap = () => {\n    $('#detailInfo').removeClass(\"o-0\");\n    $('#mapInfo').removeClass(\"w-100\");\n    $('#mapInfo').addClass(\"w-50\");\n    this.clinincList()\n  }\n\n  resetMap = () => {\n    $('#detailInfo').addClass(\"o-0\");\n    $('#mapInfo').addClass(\"w-100\");\n    $('#mapInfo').removeClass(\"w-50\");\n    var $t = this;\n    var $p = $('path[aria-checked=\"true\"]');\n    $p.attr('aria-checked', \"false\");\n    $p.attr('aria-before', $t.state.currentMap);\n    $p.attr('tabindex', \"-1\");\n    $t.setState({currentMap:null, same: true, value: \"\"});\n  }\n\n  // Clinic Component\n  clinincList = () => {\n    dis = [];\n    list = [];\n    let filteredClinics = mData.filter((s) => {\n      var check = s.city+\" \"+s.name+\" \"+s.address;\n      return check.indexOf(this.state.search) !== -1;\n    });\n    filteredClinics.map((s, i) => {\n      var count = s.address.indexOf('區') - 2;\n      var temp = s.address.substring(count, count+3);\n      if(!dis.includes(temp)) {\n        dis.push(temp);\n        list.push({\n          \"dis\": temp,\n          \"address\": [s.address]\n        })\n      } else {\n        for(var i = 0; i < list.length; i++){\n          if(list[i][\"dis\"] == temp) {\n            list[i][\"address\"].push(s.address)\n          }\n        }\n      }\n    });\n    allList = [];\n\n    for(var j = 0; j < list.length; j++) {\n      var temp = (\n        <div key={j}>\n          <h1>{list[j][\"dis\"]}</h1>\n          <div>{list[j][\"address\"]}</div>\n        </div>\n      )\n      allList.push(temp);\n    }\n    this.setState({allList:allList});\n  }\n\n  handleChange(event) {    \n    this.setState({value: event.target.value});\n  }\n  handleSubmit(event) {\n    this.setState({search:this.state.value}, () => {this.resetMap(); this.openMap()});\n    event.preventDefault();\n  }\n\n  render(){\n    const { width, height } = this.state;\n    const isMobile = width <= 959;\n    var $t = this;\n    var form = {\n      position: isMobile ? \"relative\":\"absolute\",\n      bottom: \"0\",\n    }\n\n    return (\n        <section id=\"map\" className=\"pv0\">\n          <div className=\"container bg-blue-3 pa4 brBox mh3\">\n            <h2 className=\"title bg-blue-1 pre-wrap\">{cData.map[\"title\"]}</h2>\n            {\n                (isMobile) ? \n                (\n                  <div id=\"mobileBox\" className=\"relative\">\n                    <div className=\"bg-white mh2 brBox pa4\">\n                      <form className=\"center\" style={form} onSubmit={this.handleSubmit}>\n                        <input type=\"text\" id=\"search\" name=\"clinic\" placeholder=\"輸入診所名稱查詢\" value={this.state.value} onChange={this.handleChange}/>\n                        <input type=\"submit\" value=\"查詢\"/>\n                      </form>                       \n                    </div>\n                    <div id=\"detailInfo\" className=\"fl brBox bg-blue-3 o-0 position absolute pa4\">\n                      <p>{this.state.currentMap}</p>\n                      {this.state.allList}\n                      <button onClick={() => {this.resetMap()}}>close</button>\n                    </div>\n                  </div>\n                ):\n                (\n                  <div className=\"mapContainer bg-white mh5 brBox cf pa4 relative\">\n                    <div id=\"mapInfo\" className=\"fl w-100 relative h-100\">\n                      <RadioSVGMap \n                        map={Taiwan}\n                        onChange={function(n){\n                          $t.setState({currentMap:n.id, search:n.id}, () => {\n                            $t.openMap();\n                          });\n                        }}\n                      />\n                      <form className=\"center\" style={form} onSubmit={this.handleSubmit}>\n                        <input type=\"text\" id=\"search\" name=\"clinic\" placeholder=\"輸入診所名稱查詢\" value={this.state.value} onChange={this.handleChange}/>\n                      </form>                       \n                    </div>\n                    <div id=\"detailInfo\" className=\"fl brBox bg-blue-3 o-0 position absolute pa4\">\n                      <p>{this.state.currentMap}</p>\n                      {this.state.allList}\n                      <button onClick={() => {this.resetMap()}}>close</button>\n                    </div>\n                  </div>\n                )\n            }\n          </div>\n        </section>\n    )\n  }\n}\nexport default Map"]},"metadata":{},"sourceType":"module"}