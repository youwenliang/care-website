{"ast":null,"code":"var _jsxFileName = \"/Users/mliang/Websites/care-website/src/components/Map.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport '../App.css';\nimport Taiwan from \"@svg-maps/taiwan.main\";\nimport { SVGMap, CheckboxSVGMap, RadioSVGMap } from \"react-svg-map\";\nimport \"react-svg-map/lib/index.css\";\nimport logo3 from '../images/logo3.png';\nimport searchBtn from '../images/保腎護心網layout物件_57.png';\nimport closeBtn from '../images/保腎護心網layout物件_58.png';\nimport backBtn from '../images/保腎護心網layout物件_59.png'; // Data\n\nimport data from '../data/data.js';\nconst cData = data.content;\nconst mData = data.map;\nvar dis = [],\n    list = [],\n    allList = [];\nvar sCity = [],\n    sDis = [];\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkMobile = () => {\n      this.setState({\n        width: window.innerWidth\n      });\n      this.setState({\n        height: window.innerHeight\n      });\n      sCity = [];\n      $('#sCity').empty();\n      $('#sCity').append('<option value=\"\" disabled selected>縣市</option>');\n\n      for (var k = 0; k < mData.length; k++) {\n        if (!sCity.includes(mData[k][\"address\"].substring(0, 3))) {\n          sCity.push(mData[k][\"address\"].substring(0, 3));\n          $('#sCity').append('<option>' + mData[k][\"address\"].substring(0, 3) + '</option>');\n        }\n      }\n    };\n\n    this.detailMap = () => {\n      console.log(\"!!!\");\n      console.log(list);\n\n      if (this.state.detail) {\n        this.setState({\n          detail: false,\n          currentClinic: null\n        });\n      } else this.setState({\n        detail: true\n      });\n    };\n\n    this.openMap = () => {\n      $('#detailInfo').removeClass(\"o-0\");\n      $('#mapInfo').removeClass(\"w-100\");\n      $('#mapInfo').addClass(\"w-50\");\n      this.clinincList();\n      this.setState({\n        open: true\n      });\n    };\n\n    this.resetMap = () => {\n      $('#detailInfo').addClass(\"o-0\");\n      $('#mapInfo').addClass(\"w-100\");\n      $('#mapInfo').removeClass(\"w-50\");\n      var $t = this;\n      var $p = $('path[aria-checked=\"true\"]');\n      $p.attr('aria-checked', \"false\");\n      $p.attr('aria-before', $t.state.currentMap);\n      $p.attr('tabindex', \"-1\");\n      $t.setState({\n        currentMap: null,\n        same: true,\n        value: \"\",\n        allList: null,\n        open: false\n      });\n    };\n\n    this.clinincList = () => {\n      dis = [];\n      list = [];\n      let filteredClinics = mData.filter(s => {\n        var check = s.city + \" \" + s.name + \" \" + s.address;\n        return check.indexOf(this.state.search) !== -1;\n      });\n      filteredClinics.map((s, i) => {\n        var count = s.address.indexOf('區') - 2;\n        var temp = s.address.substring(count, count + 3);\n\n        if (!dis.includes(temp)) {\n          dis.push(temp);\n          list.push({\n            \"dis\": temp,\n            \"address\": [s.address],\n            \"name\": [s.name]\n          });\n        } else {\n          for (var i = 0; i < list.length; i++) {\n            if (list[i][\"dis\"] == temp) {\n              list[i][\"address\"].push(s.address);\n            }\n          }\n        }\n      });\n      allList = [];\n\n      for (var j = 0; j < list.length; j++) {\n        var temp = /*#__PURE__*/React.createElement(\"div\", {\n          key: j,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 11\n          }\n        }, list[j][\"dis\"]), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cp\",\n          onClick: () => {\n            this.detailMap();\n            this.setState({\n              currentClinic: j\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 11\n          }\n        }, list[j][\"name\"]));\n        allList.push(temp);\n      }\n\n      this.setState({\n        allList: allList\n      });\n    };\n\n    this.state = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      value: \"\",\n      search: null,\n      currentMap: null,\n      same: false,\n      allList: [],\n      sCity: null,\n      sDis: null,\n      open: false,\n      detail: false,\n      currentClinic: null\n    };\n    this.handleSelect1 = this.handleSelect1.bind(this);\n    this.handleSelect2 = this.handleSelect2.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.detailMap = this.detailMap.bind(this);\n  }\n\n  componentDidMount() {\n    var $t = this; // Map\n\n    $('.svg-map__location').each(function () {\n      if ($(this).attr('id').indexOf(\"city\") >= 0) {\n        $(this).attr('aria-city', 'true');\n      }\n    });\n    window.addEventListener('resize', this.checkMobile);\n    this.checkMobile(); // Maps\n\n    $('path').click(function () {\n      $t.setState({\n        value: \"\"\n      });\n\n      if ($(this).attr('aria-checked') === \"true\") {\n        $(this).attr('aria-checked', \"false\");\n        $(this).attr('aria-before', $t.state.currentMap);\n        $(this).attr('tabindex', \"-1\");\n        setTimeout(function () {\n          $t.setState({\n            currentMap: null\n          });\n        }, 300);\n        $('#detailInfo').addClass(\"o-0\");\n        $('#mapInfo').addClass(\"w-100\");\n        $('#mapInfo').removeClass(\"w-50\");\n        $t.setState({\n          same: true\n        });\n      } else {\n        if ($(this).attr('aria-before')) {\n          $t.setState({\n            currentMap: $(this).attr('aria-before'),\n            search: $(this).attr('aria-before')\n          });\n          var thisID = $(this).attr('id');\n          $('path').each(function () {\n            if ($(this).attr('id') !== thisID) $(this).attr('aria-before', '');\n          });\n        } else {\n          $t.setState({\n            same: false\n          });\n          $('path').each(function () {\n            if ($(this).attr('id') !== thisID) $(this).attr('aria-before', '');\n          });\n        }\n\n        if ($t.state.same) {\n          $(this).attr('aria-checked', \"true\");\n          $(this).attr('tabindex', \"0\");\n          $t.openMap();\n        }\n      }\n    });\n  }\n\n  handleSelect1(event) {\n    var $t = this;\n    this.setState({\n      value: event.target.value,\n      sCity: event.target.value\n    }, () => {\n      sDis = [];\n      $('#sDis').empty();\n      $('#sDis').append('<option value=\"\" disabled selected>地區</option>');\n\n      for (var i = 0; i < mData.length; i++) {\n        if (mData[i][\"address\"].includes($t.state.value)) {\n          console.log(mData[i]);\n          console.log(this.state.value);\n\n          if (!sDis.includes(mData[i][\"address\"].substring(3, 6))) {\n            sDis.push(mData[i][\"address\"].substring(3, 6));\n            $('#sDis').append('<option>' + mData[i][\"address\"].substring(3, 6) + '</option>');\n          }\n        }\n      }\n    });\n  }\n\n  handleSelect2(event) {\n    this.setState({\n      sDis: event.target.value\n    }, () => {\n      this.setState({\n        value: this.state.sCity + this.state.sDis\n      });\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    this.setState({\n      search: this.state.value\n    }, () => {\n      this.resetMap();\n      this.openMap();\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      width,\n      height\n    } = this.state;\n    const isMobile = width <= 959;\n    var $t = this;\n    var form = isMobile ? {\n      position: \"relative\",\n      width: \"100%\",\n      borderRadius: \"16px\"\n    } : {\n      position: \"absolute\",\n      left: \"0\",\n      right: \"0\",\n      bottom: \"30px\",\n      width: \"235px\",\n      transform: \"translateX(80%)\",\n      borderRadius: \"16px\",\n      backgroundImage: \"url(\" + searchBtn + \")\",\n      backgroundPosition: \"10px center\",\n      backgroundSize: \"30px\",\n      backgroundRepeat: \"no-repeat\"\n    };\n    var inputBox = {\n      borderRadius: \"16px\",\n      width: \"100%\",\n      backgroundImage: \"url(\" + searchBtn + \")\",\n      backgroundPosition: \"10px center\",\n      backgroundSize: \"30px\",\n      backgroundRepeat: \"no-repeat\"\n    };\n    var input = isMobile ? {\n      borderRadius: \"8px\",\n      width: \"calc(100% - 32px)\",\n      left: \"32px\"\n    } : {\n      borderRadius: \"8px\",\n      width: \"170px\",\n      left: \"32px\"\n    };\n    return /*#__PURE__*/React.createElement(\"section\", {\n      id: \"map\",\n      className: \"pv0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container bg-blue-3 pa4-l pv4 ph3 brBox mh3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"title bg-blue-1 pre-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }, cData.map[\"title\"]), isMobile ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"relative bg-white mh2 brBox pb6 mt3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pa4 absolute w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"searchInput\",\n      className: \"center\",\n      style: form,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg-blue-3 pa3 mb4\",\n      style: inputBox,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: input,\n      className: \"bg-white pa2 relative\",\n      type: \"text\",\n      id: \"search\",\n      name: \"clinic\",\n      placeholder: \"\\u8F38\\u5165\\u8A3A\\u6240\\u540D\\u7A31\\u67E5\\u8A62\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"center tc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"city\",\n      id: \"sCity\",\n      onChange: this.handleSelect1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      disabled: true,\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 29\n      }\n    }, \"\\u7E23\\u5E02\")), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"dis\",\n      id: \"sDis\",\n      onChange: this.handleSelect2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      disabled: true,\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 29\n      }\n    }, \"\\u5730\\u5340\")), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"db tc center mt4\",\n      type: \"submit\",\n      value: \"\\u67E5\\u8A62\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 27\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"detailInfo\",\n      className: \"o-0 pa4 relative z1 bg-white brBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 25\n      }\n    }, this.state.currentMap), this.state.allList, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: closeBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 82\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page2 absolute top-0 left-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 25\n      }\n    }, this.state.currentMap), this.state.allList, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: backBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 81\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: closeBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 82\n      }\n    }))))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mapContainer bg-white mh5 brBox cf pa4 relative mb3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mapInfo\",\n      className: \"fl w-100 relative h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(RadioSVGMap, {\n      map: Taiwan,\n      onChange: function (n) {\n        $t.setState({\n          currentMap: n.id,\n          search: n.id\n        }, () => {\n          $t.openMap();\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      id: \"searchInput\",\n      className: \"center bg-blue-3 pa3\",\n      style: form,\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: input,\n      className: \"bg-white pa2 relative\",\n      type: \"text\",\n      id: \"search\",\n      name: \"clinic\",\n      placeholder: \"\\u8F38\\u5165\\u8A3A\\u6240\\u540D\\u7A31\\u67E5\\u8A62\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"detailInfo\",\n      className: \"fl brBox bg-blue-3 o-0 absolute pa4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 25\n      }\n    }, this.state.currentMap), this.state.allList, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: closeBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 82\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page2 absolute top-0 left-0 w-100 h-100 bg-blue-3 pa4 brBox \" + this.state.detail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 25\n      }\n    }, this.state.currentMap), this.state.currentClinic ? list[this.state.currentClinic][\"address\"] : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      onClick: () => {\n        this.detailMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: backBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 82\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"close\",\n      onClick: () => {\n        this.resetMap();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: closeBtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 82\n      }\n    })))), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"absolute pn bottom-0 left-0 pa5 transition\",\n      src: logo3,\n      width: this.state.open ? \"100\" : \"230\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }\n    }))));\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["/Users/mliang/Websites/care-website/src/components/Map.js"],"names":["React","Component","$","Taiwan","SVGMap","CheckboxSVGMap","RadioSVGMap","logo3","searchBtn","closeBtn","backBtn","data","cData","content","mData","map","dis","list","allList","sCity","sDis","Map","constructor","props","checkMobile","setState","width","window","innerWidth","height","innerHeight","empty","append","k","length","includes","substring","push","detailMap","console","log","state","detail","currentClinic","openMap","removeClass","addClass","clinincList","open","resetMap","$t","$p","attr","currentMap","same","value","filteredClinics","filter","s","check","city","name","address","indexOf","search","i","count","temp","j","handleSelect1","bind","handleSelect2","handleChange","handleSubmit","componentDidMount","each","addEventListener","click","setTimeout","thisID","event","target","preventDefault","render","isMobile","form","position","borderRadius","left","right","bottom","transform","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","inputBox","input","n","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\nimport '../App.css';\n\nimport Taiwan from \"@svg-maps/taiwan.main\";\nimport { SVGMap, CheckboxSVGMap, RadioSVGMap} from \"react-svg-map\";\nimport \"react-svg-map/lib/index.css\";\nimport logo3 from '../images/logo3.png';\n\nimport searchBtn from '../images/保腎護心網layout物件_57.png';\nimport closeBtn from '../images/保腎護心網layout物件_58.png';\nimport backBtn from '../images/保腎護心網layout物件_59.png';\n\n// Data\nimport data from '../data/data.js'\nconst cData = data.content;\nconst mData = data.map;\nvar dis = [], list = [], allList = [];\nvar sCity = [], sDis = [];\n\nclass Map extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n      value: \"\",\n      search: null,\n      currentMap: null,\n      same: false,\n      allList: [],\n      sCity: null,\n      sDis: null,\n      open: false,\n      detail: false,\n      currentClinic: null\n    }\n    this.handleSelect1 = this.handleSelect1.bind(this);\n    this.handleSelect2 = this.handleSelect2.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.detailMap = this.detailMap.bind(this);\n  }\n\n  componentDidMount(){\n    var $t = this\n\n    // Map\n    $('.svg-map__location').each(function(){\n      if($(this).attr('id').indexOf(\"city\") >=0) {\n        $(this).attr('aria-city', 'true');\n      }\n    })\n    window.addEventListener('resize', this.checkMobile);\n    this.checkMobile()\n\n    // Maps\n    $('path').click(function(){\n      $t.setState({value: \"\"})\n      if($(this).attr('aria-checked') === \"true\") {\n        $(this).attr('aria-checked', \"false\");\n        $(this).attr('aria-before', $t.state.currentMap);\n        $(this).attr('tabindex', \"-1\");\n        setTimeout(function(){\n          $t.setState({currentMap:null})\n        },300)\n        $('#detailInfo').addClass(\"o-0\");\n        $('#mapInfo').addClass(\"w-100\");\n        $('#mapInfo').removeClass(\"w-50\");\n        $t.setState({same: true});\n      } else {\n        if($(this).attr('aria-before')) {\n          $t.setState({currentMap:$(this).attr('aria-before'), search:$(this).attr('aria-before')});\n          var thisID = $(this).attr('id');\n          $('path').each(function(){\n            if($(this).attr('id')!==thisID) $(this).attr('aria-before','');     \n          })\n        } else {\n          $t.setState({same: false});\n          $('path').each(function(){\n            if($(this).attr('id')!==thisID) $(this).attr('aria-before','');     \n          })\n        }\n        if($t.state.same) {\n          $(this).attr('aria-checked', \"true\");\n          $(this).attr('tabindex', \"0\");\n          $t.openMap(); \n        }\n      }\n    })\n  }\n\n  checkMobile = () => {\n    this.setState({ width: window.innerWidth });\n    this.setState({ height: window.innerHeight });\n    sCity = [];\n    $('#sCity').empty();\n    $('#sCity').append('<option value=\"\" disabled selected>縣市</option>');\n    for(var k = 0; k < mData.length; k++) {\n      if(!sCity.includes(mData[k][\"address\"].substring(0,3))) {\n        sCity.push(mData[k][\"address\"].substring(0,3));\n        $('#sCity').append('<option>'+mData[k][\"address\"].substring(0,3)+'</option>');\n      }\n    }\n  }\n\n  detailMap = () => {\n    console.log(\"!!!\");\n    console.log(list)\n    if(this.state.detail) {\n      this.setState({detail: false, currentClinic: null})\n    } else this.setState({detail: true})\n  }\n\n  openMap = () => {\n    $('#detailInfo').removeClass(\"o-0\");\n    $('#mapInfo').removeClass(\"w-100\");\n    $('#mapInfo').addClass(\"w-50\");\n    this.clinincList()\n    this.setState({open: true});\n  }\n\n  resetMap = () => {\n    $('#detailInfo').addClass(\"o-0\");\n    $('#mapInfo').addClass(\"w-100\");\n    $('#mapInfo').removeClass(\"w-50\");\n    var $t = this;\n    var $p = $('path[aria-checked=\"true\"]');\n    $p.attr('aria-checked', \"false\");\n    $p.attr('aria-before', $t.state.currentMap);\n    $p.attr('tabindex', \"-1\");\n    $t.setState({currentMap:null, same: true, value: \"\", allList: null, open: false});\n  }\n\n  // Clinic Component\n  clinincList = () => {\n    dis = [];\n    list = [];\n    let filteredClinics = mData.filter((s) => {\n      var check = s.city+\" \"+s.name+\" \"+s.address;\n      return check.indexOf(this.state.search) !== -1;\n    });\n    filteredClinics.map((s, i) => {\n      var count = s.address.indexOf('區') - 2;\n      var temp = s.address.substring(count, count+3);\n      if(!dis.includes(temp)) {\n        dis.push(temp);\n        list.push({\n          \"dis\": temp,\n          \"address\": [s.address],\n          \"name\": [s.name]\n        })\n      } else {\n        for(var i = 0; i < list.length; i++){\n          if(list[i][\"dis\"] == temp) {\n            list[i][\"address\"].push(s.address)\n          }\n        }\n      }\n    });\n    allList = [];\n\n    for(var j = 0; j < list.length; j++) {\n      var temp = (\n        <div key={j}>\n          <h1>{list[j][\"dis\"]}</h1>\n          <div className=\"cp\" onClick={() => {this.detailMap(); this.setState({currentClinic: j})}}>{list[j][\"name\"]}</div>\n        </div>\n      )\n      allList.push(temp);\n    }\n    this.setState({allList:allList});\n  }\n\n  handleSelect1(event) {\n    var $t = this;\n    this.setState({value: event.target.value, sCity: event.target.value}, () => {\n      sDis = [];\n      $('#sDis').empty();\n      $('#sDis').append('<option value=\"\" disabled selected>地區</option>');\n      for(var i = 0; i < mData.length; i++) {\n        if(mData[i][\"address\"].includes($t.state.value)) {\n          console.log(mData[i]);  \n          console.log(this.state.value);\n          if(!sDis.includes(mData[i][\"address\"].substring(3,6))) {\n            sDis.push(mData[i][\"address\"].substring(3,6));\n            $('#sDis').append('<option>'+mData[i][\"address\"].substring(3,6)+'</option>');\n          }\n        }\n      }\n    });\n  }\n\n  handleSelect2(event) {\n    this.setState({sDis:event.target.value}, () => {\n      this.setState({value: this.state.sCity+this.state.sDis});\n    });\n  }\n\n  handleChange(event) {    \n    this.setState({value: event.target.value});\n  }\n  handleSubmit(event) {\n    this.setState({search:this.state.value}, () => {this.resetMap(); this.openMap()});\n    event.preventDefault();\n  }\n\n  render(){\n    const { width, height } = this.state;\n    const isMobile = width <= 959;\n    var $t = this;\n    var form = isMobile ? {\n      position: \"relative\",\n      width: \"100%\",\n      borderRadius: \"16px\"\n    }:\n    {\n      position: \"absolute\",\n      left: \"0\",\n      right: \"0\",\n      bottom: \"30px\",\n      width: \"235px\",\n      transform: \"translateX(80%)\",\n      borderRadius: \"16px\",\n      backgroundImage: \"url(\"+searchBtn+\")\",\n      backgroundPosition: \"10px center\",\n      backgroundSize: \"30px\",\n      backgroundRepeat: \"no-repeat\"\n    }\n    var inputBox = {\n      borderRadius: \"16px\",\n      width: \"100%\",\n      backgroundImage: \"url(\"+searchBtn+\")\",\n      backgroundPosition: \"10px center\",\n      backgroundSize: \"30px\",\n      backgroundRepeat: \"no-repeat\"\n    }\n\n    var input = isMobile ? {\n      borderRadius: \"8px\",\n      width: \"calc(100% - 32px)\",\n      left: \"32px\"\n    }:\n    {\n      borderRadius: \"8px\",\n      width: \"170px\",\n      left: \"32px\"\n    }\n\n    return (\n        <section id=\"map\" className=\"pv0\">\n          <div className=\"container bg-blue-3 pa4-l pv4 ph3 brBox mh3\">\n            <h2 className=\"title bg-blue-1 pre-wrap\">{cData.map[\"title\"]}</h2>\n            {\n                (isMobile) ? \n                (\n                  <div className=\"relative bg-white mh2 brBox pb6 mt3\">\n                    <div className=\"pa4 absolute w-100\">\n                      <form id=\"searchInput\" className=\"center\" style={form} onSubmit={this.handleSubmit}>\n                        <div className=\"bg-blue-3 pa3 mb4\" style={inputBox}>\n                          <input style={input} className=\"bg-white pa2 relative\" type=\"text\" id=\"search\" name=\"clinic\" placeholder=\"輸入診所名稱查詢\" value={this.state.value} onChange={this.handleChange}/>\n                        </div>\n                        <div className=\"center tc\">\n                          <select name=\"city\" id=\"sCity\" onChange={this.handleSelect1}>\n                            <option value=\"\" disabled selected>縣市</option>\n                          </select>\n                          <select name=\"dis\" id=\"sDis\" onChange={this.handleSelect2}>\n                            <option value=\"\" disabled selected>地區</option>\n                          </select>\n                          <input className=\"db tc center mt4\" type=\"submit\" value=\"查詢\"/>\n                        </div>\n                      </form>                       \n                    </div>\n                    <div id=\"detailInfo\" className=\"o-0 pa4 relative z1 bg-white brBox\">\n                      <div className=\"page1\">\n                        <p>{this.state.currentMap}</p>\n                        {this.state.allList}\n                        <div className=\"close\" onClick={() => {this.resetMap()}}><img src={closeBtn}/></div>\n                      </div>\n                      <div className=\"page2 absolute top-0 left-0\">\n                        <p>{this.state.currentMap}</p>\n                        {this.state.allList}\n                        <div className=\"back\" onClick={() => {this.resetMap()}}><img src={backBtn}/></div>\n                        <div className=\"close\" onClick={() => {this.resetMap()}}><img src={closeBtn}/></div>\n                      </div>\n                    </div>\n                  </div>\n                ):\n                (\n                  <div className=\"mapContainer bg-white mh5 brBox cf pa4 relative mb3\">\n                    <div id=\"mapInfo\" className=\"fl w-100 relative h-100\">\n                      <RadioSVGMap \n                        map={Taiwan}\n                        onChange={function(n){\n                          $t.setState({currentMap:n.id, search:n.id}, () => {\n                            $t.openMap();\n                          });\n                        }}\n                      />\n                      <form id=\"searchInput\" className=\"center bg-blue-3 pa3\" style={form} onSubmit={this.handleSubmit}>\n                        <input style={input} className=\"bg-white pa2 relative\" type=\"text\" id=\"search\" name=\"clinic\" placeholder=\"輸入診所名稱查詢\" value={this.state.value} onChange={this.handleChange}/>\n                      </form>                       \n                    </div>\n                    <div id=\"detailInfo\" className=\"fl brBox bg-blue-3 o-0 absolute pa4\">\n                      <div className=\"page1\">\n                        <p>{this.state.currentMap}</p>\n                        {this.state.allList}\n                        <div className=\"close\" onClick={() => {this.resetMap()}}><img src={closeBtn}/></div>\n                      </div>\n                      <div className={\"page2 absolute top-0 left-0 w-100 h-100 bg-blue-3 pa4 brBox \"+this.state.detail}>\n                        <p>{this.state.currentMap}</p>\n                        {this.state.currentClinic ? list[this.state.currentClinic][\"address\"] : null}\n                        <div className=\"back\" onClick={() => {this.detailMap()}}><img src={backBtn}/></div>\n                        <div className=\"close\" onClick={() => {this.resetMap()}}><img src={closeBtn}/></div>\n                      </div>\n                    </div>\n                    <img className=\"absolute pn bottom-0 left-0 pa5 transition\" src={logo3} width={this.state.open ? \"100\":\"230\"} />\n                  </div>\n                )\n            }\n          </div>\n        </section>\n    )\n  }\n}\nexport default Map"]},"metadata":{},"sourceType":"module"}